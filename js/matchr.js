(function() {
  /*
  00     00   0000000   000000000   0000000  000   000  00000000 
  000   000  000   000     000     000       000   000  000   000
  000000000  000000000     000     000       000000000  0000000  
  000 0 000  000   000     000     000       000   000  000   000
  000   000  000   000     000      0000000  000   000  000   000
  */
  var _, config, dissect, ranges;

  ({_} = require('kxk'));

  /*
   0000000   0000000   000   000  00000000  000   0000000 
  000       000   000  0000  000  000       000  000      
  000       000   000  000 0 000  000000    000  000  0000
  000       000   000  000  0000  000       000  000   000
   0000000   0000000   000   000  000       000   0000000 
  */

  // convert the patterns object to a list of [RegExp(key), value] pairs
  config = function(patterns) {
    var a, p, results;
    results = [];
    for (p in patterns) {
      a = patterns[p];
      results.push([new RegExp(p), a]);
    }
    return results;
  };

  /*
  00000000    0000000   000   000   0000000   00000000   0000000
  000   000  000   000  0000  000  000        000       000     
  0000000    000000000  000 0 000  000  0000  0000000   0000000 
  000   000  000   000  000  0000  000   000  000            000
  000   000  000   000  000   000   0000000   00000000  0000000 
  */

  // accepts a list of [regexp, value(s)] pairs and a string
  // returns a list of objects with information about the matches:

  //     match: the matched substring
  //     start: position of match in str
  //     value: the value for the match
  //     index: the index of the regexp 

  //     the objects are sorted by start, match.length and index

  //     if the regexp has capture groups then 
  //         the value for the match of the nth group is
  //             the nth item of values(s) if value(s) is an array
  //             the nth [key, value] pair if value(s) is an object
  ranges = function(regexes, str) {
    var arg, gi, gs, i, j, k, l, match, r, ref, ref1, reg, rgs, s, value;
    rgs = [];
    for (r = k = 0, ref = regexes.length; (0 <= ref ? k < ref : k > ref); r = 0 <= ref ? ++k : --k) {
      reg = regexes[r][0];
      arg = regexes[r][1];
      i = 0;
      s = str;
      while (s.length) {
        match = reg.exec(s);
        if (match == null) {
          break;
        }
        if (match.length === 1) {
          rgs.push({
            start: match.index + i,
            match: match[0],
            value: arg,
            index: r
          });
          i += match.index + match[0].length;
          s = str.slice(i);
        } else {
          gs = 0;
          for (j = l = 0, ref1 = match.length - 2; (0 <= ref1 ? l <= ref1 : l >= ref1); j = 0 <= ref1 ? ++l : --l) {
            value = arg;
            if (_.isArray(value) && j < value.length) {
              value = value[j];
            } else if (_.isObject(value) && j < _.size(value)) {
              value = [_.keys(value)[j], value[_.keys(value)[j]]];
            }
            gi = match[0].slice(gs).indexOf(match[j + 1]);
            rgs.push({
              start: match.index + i + gs + gi,
              match: match[j + 1],
              value: value,
              index: r
            });
            gs += match[j + 1].length;
          }
          i += match.index + match[0].length;
          s = str.slice(i);
        }
      }
    }
    return rgs.sort(function(a, b) {
      if (a.start === b.start) {
        if (a.match.length === b.match.length) {
          return a.index - b.index;
        } else {
          return a.match.length - b.match.length;
        }
      } else {
        return a.start - b.start;
      }
    });
  };

  /*
  0000000    000   0000000   0000000  00000000   0000000  000000000
  000   000  000  000       000       000       000          000   
  000   000  000  0000000   0000000   0000000   000          000   
  000   000  000       000       000  000       000          000   
  0000000    000  0000000   0000000   00000000   0000000     000   
  */

  // accepts a list of ranges
  // returns a new list of objects

  //     match: the matched substring
  //     start: position of match in str
  //     stack: list of values

  //     with none of the [start, start+match.length] ranges overlapping
  dissect = function(ranges) {
    var d, di, i, k, l, m, p, pn, ref, ref1, ref2, rg, ri, si;
    if (!ranges.length) {
      return [];
    }
    di = [];
    for (ri = k = 0, ref = ranges.length; (0 <= ref ? k < ref : k > ref); ri = 0 <= ref ? ++k : --k) {
      rg = ranges[ri];
      di.push([rg.start, ri]);
      di.push([rg.start + rg.match.length]);
    }
    di.sort(function(a, b) {
      if (a[0] === b[0]) {
        return a[1] - b[1];
      } else {
        return a[0] - b[0];
      }
    });
    d = [];
    si = -1;
    for (i = l = 0, ref1 = di.length - 1; (0 <= ref1 ? l < ref1 : l > ref1); i = 0 <= ref1 ? ++l : --l) {
      if (di[i][0] > si) {
        si = di[i][0];
        d.push({
          start: si,
          stack: []
        });
      }
    }
    p = 0;
    for (ri = m = 0, ref2 = ranges.length; (0 <= ref2 ? m < ref2 : m > ref2); ri = 0 <= ref2 ? ++m : --m) {
      rg = ranges[ri];
      while (d[p].start < rg.start) {
        p += 1;
      }
      pn = p;
      while (d[pn].start < rg.start + rg.match.length) {
        d[pn].stack.push([rg.index, rg.value]);
        if (pn + 1 < d.length) {
          if (!d[pn].match) {
            d[pn].match = rg.match.substr(d[pn].start - rg.start, d[pn + 1].start - d[pn].start);
          }
          pn += 1;
        } else {
          if (!d[pn].match) {
            d[pn].match = rg.match.substr(d[pn].start - rg.start);
          }
          break;
        }
      }
    }
    d = d.filter(function(i) {
      return i.match != null;
    });
    return d = d.map(function(i) {
      i.stack = i.stack.sort(function(a, b) {
        return a[0] - b[0];
      }).map(function(j) {
        return j[1];
      });
      return i;
    });
  };

  module.exports = {
    config: config,
    ranges: ranges,
    dissect: dissect
  };

}).call(this);

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0Y2hyLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIi4uL2NvZmZlZS9tYXRjaHIuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQUE7Ozs7Ozs7QUFBQSxNQUFBLENBQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxFQUFBOztFQVFBLENBQUEsQ0FBRSxDQUFGLENBQUEsR0FBTyxPQUFBLENBQVEsS0FBUixDQUFQLEVBUkE7Ozs7Ozs7Ozs7O0VBb0JBLE1BQUEsR0FBUyxRQUFBLENBQUMsUUFBRCxDQUFBO0FBQWMsUUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQXFCO0lBQUEsS0FBQSxhQUFBOzttQkFBbkIsQ0FBQyxJQUFJLE1BQUosQ0FBVyxDQUFYLENBQUQsRUFBZ0IsQ0FBaEI7SUFBbUIsQ0FBQTs7RUFBbkMsRUFwQlQ7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztFQTZDQSxNQUFBLEdBQVMsUUFBQSxDQUFDLE9BQUQsRUFBVSxHQUFWLENBQUE7QUFFTCxRQUFBLEdBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxFQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUE7SUFBQSxHQUFBLEdBQU07SUFDTixLQUFTLHlGQUFUO01BQ0ksR0FBQSxHQUFNLE9BQVEsQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBO01BQ2pCLEdBQUEsR0FBTSxPQUFRLENBQUEsQ0FBQSxDQUFHLENBQUEsQ0FBQTtNQUNqQixDQUFBLEdBQUk7TUFDSixDQUFBLEdBQUk7QUFDSixhQUFNLENBQUMsQ0FBQyxNQUFSO1FBQ0ksS0FBQSxHQUFRLEdBQUcsQ0FBQyxJQUFKLENBQVMsQ0FBVDtRQUNSLElBQWEsYUFBYjtBQUFBLGdCQUFBOztRQUNBLElBQUcsS0FBSyxDQUFDLE1BQU4sS0FBZ0IsQ0FBbkI7VUFDSSxH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TjtFQXRDRTs7RUEwQ1YsTUFBTSxDQUFDLE9BQVAsR0FDSTtJQUFBLE1BQUEsRUFBUyxNQUFUO0lBQ0EsTUFBQSxFQUFTLE1BRFQ7SUFFQSxPQUFBLEVBQVM7RUFGVDtBQXRKSiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAgICAgIDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgIDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDBcbjAwMDAwMDAwMCAgMDAwMDAwMDAwICAgICAwMDAgICAgIDAwMCAgICAgICAwMDAwMDAwMDAgIDAwMDAwMDAgIFxuMDAwIDAgMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgMDAwMDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDBcbiMjI1xuXG57IF8gfT0gcmVxdWlyZSAna3hrJ1xuXG4jIyNcbiAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIDAwMCAgIDAwMDAwMDAgXG4wMDAgICAgICAgMDAwICAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICAwMDAgIDAwMCAgICAgIFxuMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwIDAgMDAwICAwMDAwMDAgICAgMDAwICAwMDAgIDAwMDBcbjAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgMDAwMCAgMDAwICAgICAgIDAwMCAgMDAwICAgMDAwXG4gMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAwMDAwIFxuIyMjXG4jXG4jIGNvbnZlcnQgdGhlIHBhdHRlcm5zIG9iamVjdCB0byBhIGxpc3Qgb2YgW1JlZ0V4cChrZXkpLCB2YWx1ZV0gcGFpcnNcblxuY29uZmlnID0gKHBhdHRlcm5zKSAtPiAoIFtuZXcgUmVnRXhwKHApLCBhXSBmb3IgcCxhIG9mIHBhdHRlcm5zIClcblxuIyMjXG4wMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAgICAwMDAgICAgICAgMDAwICAgICBcbjAwMDAwMDAgICAgMDAwMDAwMDAwICAwMDAgMCAwMDAgIDAwMCAgMDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAgICAgIDAwMFxuMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgMDAwMDAwMCBcbiMjI1xuI1xuIyBhY2NlcHRzIGEgbGlzdCBvZiBbcmVnZXhwLCB2YWx1ZShzKV0gcGFpcnMgYW5kIGEgc3RyaW5nXG4jIHJldHVybnMgYSBsaXN0IG9mIG9iamVjdHMgd2l0aCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgbWF0Y2hlczpcbiMgXG4jICAgICBtYXRjaDogdGhlIG1hdGNoZWQgc3Vic3RyaW5nXG4jICAgICBzdGFydDogcG9zaXRpb24gb2YgbWF0Y2ggaW4gc3RyXG4jICAgICB2YWx1ZTogdGhlIHZhbHVlIGZvciB0aGUgbWF0Y2hcbiMgICAgIGluZGV4OiB0aGUgaW5kZXggb2YgdGhlIHJlZ2V4cCBcbiMgICAgIFxuIyAgICAgdGhlIG9iamVjdHMgYXJlIHNvcnRlZCBieSBzdGFydCwgbWF0Y2gubGVuZ3RoIGFuZCBpbmRleFxuIyAgICAgXG4jICAgICBpZiB0aGUgcmVnZXhwIGhhcyBjYXB0dXJlIGdyb3VwcyB0aGVuIFxuIyAgICAgICAgIHRoZSB2YWx1ZSBmb3IgdGhlIG1hdGNoIG9mIHRoZSBudGggZ3JvdXAgaXNcbiMgICAgICAgICAgICAgdGhlIG50aCBpdGVtIG9mIHZhbHVlcyhzKSBpZiB2YWx1ZShzKSBpcyBhbiBhcnJheVxuIyAgICAgICAgICAgICB0aGUgbnRoIFtrZXksIHZhbHVlXSBwYWlyIGlmIHZhbHVlKHMpIGlzIGFuIG9iamVjdFxuXG5yYW5nZXMgPSAocmVnZXhlcywgc3RyKSAtPlxuICAgIFxuICAgIHJncyA9IFtdXG4gICAgZm9yIHIgaW4gWzAuLi5yZWdleGVzLmxlbmd0aF1cbiAgICAgICAgcmVnID0gcmVnZXhlc1tyXVswXVxuICAgICAgICBhcmcgPSByZWdleGVzW3JdWzFdXG4gICAgICAgIGkgPSAwXG4gICAgICAgIHMgPSBzdHJcbiAgICAgICAgd2hpbGUgcy5sZW5ndGhcbiAgICAgICAgICAgIG1hdGNoID0gcmVnLmV4ZWMgc1xuICAgICAgICAgICAgYnJlYWsgaWYgbm90IG1hdGNoP1xuICAgICAgICAgICAgaWYgbWF0Y2gubGVuZ3RoID09IDFcbiAgICAgICAgICAgICAgICByZ3MucHVzaFxuICAgICAgICAgICAgICAgICAgICBzdGFydDogbWF0Y2guaW5kZXggKyBpXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoOiBtYXRjaFswXVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTogYXJnXG4gICAgICAgICAgICAgICAgICAgIGluZGV4OiByXG4gICAgICAgICAgICAgICAgaSArPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aFxuICAgICAgICAgICAgICAgIHMgPSBzdHIuc2xpY2UgaVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGdzID0gMFxuICAgICAgICAgICAgICAgIGZvciBqIGluIFswLi5tYXRjaC5sZW5ndGgtMl1cbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBhcmdcbiAgICAgICAgICAgICAgICAgICAgaWYgXy5pc0FycmF5KHZhbHVlKSBhbmQgaiA8IHZhbHVlLmxlbmd0aCB0aGVuIHZhbHVlID0gdmFsdWVbal1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiBfLmlzT2JqZWN0KHZhbHVlKSBhbmQgaiA8IF8uc2l6ZSh2YWx1ZSkgXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IFtfLmtleXModmFsdWUpW2pdLCB2YWx1ZVtfLmtleXModmFsdWUpW2pdXV1cbiAgICAgICAgICAgICAgICAgICAgZ2kgPSBtYXRjaFswXS5zbGljZShncykuaW5kZXhPZiBtYXRjaFtqKzFdXG4gICAgICAgICAgICAgICAgICAgIHJncy5wdXNoXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydDogbWF0Y2guaW5kZXggKyBpICsgZ3MgKyBnaVxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2g6IG1hdGNoW2orMV1cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHJcbiAgICAgICAgICAgICAgICAgICAgZ3MgKz0gbWF0Y2hbaisxXS5sZW5ndGhcbiAgICAgICAgICAgICAgICBpICs9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoXG4gICAgICAgICAgICAgICAgcyA9IHN0ci5zbGljZSBpXG4gICAgICAgICAgICBcbiAgICByZ3Muc29ydCAoYSxiKSAtPiBcbiAgICAgICAgaWYgYS5zdGFydCA9PSBiLnN0YXJ0XG4gICAgICAgICAgICBpZiBhLm1hdGNoLmxlbmd0aCA9PSBiLm1hdGNoLmxlbmd0aFxuICAgICAgICAgICAgICAgIGEuaW5kZXggLSBiLmluZGV4XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYS5tYXRjaC5sZW5ndGggLSBiLm1hdGNoLmxlbmd0aFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhLnN0YXJ0IC0gYi5zdGFydFxuXG4jIyNcbjAwMDAwMDAgICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAwXG4wMDAgICAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICAgMDAwICAgICAgICAgIDAwMCAgIFxuMDAwICAgMDAwICAwMDAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgICAgICAgICAwMDAgICBcbjAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgIDAwMCAgICAgICAwMDAgICAgICAgICAgMDAwICAgXG4wMDAwMDAwICAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwMCAgIDAwMDAwMDAgICAgIDAwMCAgIFxuIyMjXG4jIFxuIyBhY2NlcHRzIGEgbGlzdCBvZiByYW5nZXNcbiMgcmV0dXJucyBhIG5ldyBsaXN0IG9mIG9iamVjdHNcbiMgXG4jICAgICBtYXRjaDogdGhlIG1hdGNoZWQgc3Vic3RyaW5nXG4jICAgICBzdGFydDogcG9zaXRpb24gb2YgbWF0Y2ggaW4gc3RyXG4jICAgICBzdGFjazogbGlzdCBvZiB2YWx1ZXNcbiMgICAgIFxuIyAgICAgd2l0aCBub25lIG9mIHRoZSBbc3RhcnQsIHN0YXJ0K21hdGNoLmxlbmd0aF0gcmFuZ2VzIG92ZXJsYXBwaW5nXG5cbmRpc3NlY3QgPSAocmFuZ2VzKSAtPiBcbiAgICByZXR1cm4gW10gaWYgbm90IHJhbmdlcy5sZW5ndGhcbiAgICBkaSA9IFtdXG4gICAgZm9yIHJpIGluIFswLi4ucmFuZ2VzLmxlbmd0aF1cbiAgICAgICAgcmcgPSByYW5nZXNbcmldXG4gICAgICAgIGRpLnB1c2ggW3JnLnN0YXJ0LCByaV1cbiAgICAgICAgZGkucHVzaCBbcmcuc3RhcnQgKyByZy5tYXRjaC5sZW5ndGhdXG4gICAgZGkuc29ydCAoYSxiKSAtPiBcbiAgICAgICAgaWYgYVswXT09YlswXSBcbiAgICAgICAgICAgIGFbMV0tYlsxXVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBhWzBdLWJbMF1cbiAgICBkID0gW11cbiAgICBzaSA9IC0xXG4gICAgZm9yIGkgaW4gWzAuLi5kaS5sZW5ndGgtMV1cbiAgICAgICAgaWYgZGlbaV1bMF0gPiBzaVxuICAgICAgICAgICAgc2kgPSBkaVtpXVswXVxuICAgICAgICAgICAgZC5wdXNoXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHNpXG4gICAgICAgICAgICAgICAgc3RhY2s6IFtdXG5cbiAgICBwID0gMFxuICAgIGZvciByaSBpbiBbMC4uLnJhbmdlcy5sZW5ndGhdXG4gICAgICAgIHJnID0gcmFuZ2VzW3JpXVxuICAgICAgICB3aGlsZSBkW3BdLnN0YXJ0IDwgcmcuc3RhcnQgXG4gICAgICAgICAgICBwICs9IDEgXG4gICAgICAgIHBuID0gcFxuICAgICAgICB3aGlsZSBkW3BuXS5zdGFydCA8IHJnLnN0YXJ0K3JnLm1hdGNoLmxlbmd0aFxuICAgICAgICAgICAgZFtwbl0uc3RhY2sucHVzaCBbcmcuaW5kZXgsIHJnLnZhbHVlXVxuICAgICAgICAgICAgaWYgcG4rMSA8IGQubGVuZ3RoXG4gICAgICAgICAgICAgICAgaWYgbm90IGRbcG5dLm1hdGNoXG4gICAgICAgICAgICAgICAgICAgIGRbcG5dLm1hdGNoID0gcmcubWF0Y2guc3Vic3RyIGRbcG5dLnN0YXJ0LXJnLnN0YXJ0LCBkW3BuKzFdLnN0YXJ0LWRbcG5dLnN0YXJ0XG4gICAgICAgICAgICAgICAgcG4gKz0gMVxuICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIGlmIG5vdCBkW3BuXS5tYXRjaFxuICAgICAgICAgICAgICAgICAgICBkW3BuXS5tYXRjaCA9IHJnLm1hdGNoLnN1YnN0ciBkW3BuXS5zdGFydC1yZy5zdGFydFxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgZCA9IGQuZmlsdGVyIChpKSAtPiBpLm1hdGNoP1xuICAgIGQgPSBkLm1hcCAoaSkgLT4gXG4gICAgICAgIGkuc3RhY2sgPSBpLnN0YWNrLnNvcnQoKGEsYiktPmFbMF0tYlswXSkubWFwIChqKSAtPiBqWzFdXG4gICAgICAgIGlcblxubW9kdWxlLmV4cG9ydHMgPSBcbiAgICBjb25maWc6ICBjb25maWdcbiAgICByYW5nZXM6ICByYW5nZXNcbiAgICBkaXNzZWN0OiBkaXNzZWN0XG4iXX0=
//# sourceURL=../coffee/matchr.coffee