// koffee 0.56.0

/*
00     00   0000000   000000000   0000000  000   000  00000000 
000   000  000   000     000     000       000   000  000   000
000000000  000000000     000     000       000000000  0000000  
000 0 000  000   000     000     000       000   000  000   000
000   000  000   000     000      0000000  000   000  000   000
 */
var _, config, dissect, ranges;

_ = require('lodash');


/*
 0000000   0000000   000   000  00000000  000   0000000 
000       000   000  0000  000  000       000  000      
000       000   000  000 0 000  000000    000  000  0000
000       000   000  000  0000  000       000  000   000
 0000000   0000000   000   000  000       000   0000000
 */

config = function(patterns) {
    var a, p, results;
    results = [];
    for (p in patterns) {
        a = patterns[p];
        results.push([new RegExp(p), a]);
    }
    return results;
};


/*
00000000    0000000   000   000   0000000   00000000   0000000
000   000  000   000  0000  000  000        000       000     
0000000    000000000  000 0 000  000  0000  0000000   0000000 
000   000  000   000  000  0000  000   000  000            000
000   000  000   000  000   000   0000000   00000000  0000000
 */

ranges = function(regexes, str) {
    var arg, gi, gs, i, j, k, l, match, r, ref, ref1, reg, rgs, s, value;
    rgs = [];
    for (r = k = 0, ref = regexes.length; 0 <= ref ? k < ref : k > ref; r = 0 <= ref ? ++k : --k) {
        reg = regexes[r][0];
        arg = regexes[r][1];
        i = 0;
        s = str;
        while (s.length) {
            match = reg.exec(s);
            if (match == null) {
                break;
            }
            if (match.length === 1) {
                rgs.push({
                    start: match.index + i,
                    match: match[0],
                    value: arg,
                    index: r
                });
                i += match.index + match[0].length;
                s = str.slice(i);
            } else {
                gs = 0;
                for (j = l = 0, ref1 = match.length - 2; 0 <= ref1 ? l <= ref1 : l >= ref1; j = 0 <= ref1 ? ++l : --l) {
                    value = arg;
                    if (_.isArray(value) && j < value.length) {
                        value = value[j];
                    } else if (_.isObject(value) && j < _.size(value)) {
                        value = [_.keys(value)[j], value[_.keys(value)[j]]];
                    }
                    gi = match[0].slice(gs).indexOf(match[j + 1]);
                    rgs.push({
                        start: match.index + i + gs + gi,
                        match: match[j + 1],
                        value: value,
                        index: r
                    });
                    gs += match[j + 1].length;
                }
                i += match.index + match[0].length;
                s = str.slice(i);
            }
        }
    }
    return rgs.sort(function(a, b) {
        if (a.start === b.start) {
            if (a.match.length === b.match.length) {
                return a.index - b.index;
            } else {
                return a.match.length - b.match.length;
            }
        } else {
            return a.start - b.start;
        }
    });
};


/*
0000000    000   0000000   0000000  00000000   0000000  000000000
000   000  000  000       000       000       000          000   
000   000  000  0000000   0000000   0000000   000          000   
000   000  000       000       000  000       000          000   
0000000    000  0000000   0000000   00000000   0000000     000
 */

dissect = function(ranges) {
    var d, di, i, k, l, m, p, pn, ref, ref1, ref2, rg, ri, si;
    if (!ranges.length) {
        return [];
    }
    di = [];
    for (ri = k = 0, ref = ranges.length; 0 <= ref ? k < ref : k > ref; ri = 0 <= ref ? ++k : --k) {
        rg = ranges[ri];
        di.push([rg.start, ri]);
        di.push([rg.start + rg.match.length]);
    }
    di.sort(function(a, b) {
        if (a[0] === b[0]) {
            return a[1] - b[1];
        } else {
            return a[0] - b[0];
        }
    });
    d = [];
    si = -1;
    for (i = l = 0, ref1 = di.length - 1; 0 <= ref1 ? l < ref1 : l > ref1; i = 0 <= ref1 ? ++l : --l) {
        if (di[i][0] > si) {
            si = di[i][0];
            d.push({
                start: si,
                stack: []
            });
        }
    }
    p = 0;
    for (ri = m = 0, ref2 = ranges.length; 0 <= ref2 ? m < ref2 : m > ref2; ri = 0 <= ref2 ? ++m : --m) {
        rg = ranges[ri];
        while (d[p].start < rg.start) {
            p += 1;
        }
        pn = p;
        while (d[pn].start < rg.start + rg.match.length) {
            d[pn].stack.push([rg.index, rg.value]);
            if (pn + 1 < d.length) {
                if (!d[pn].match) {
                    d[pn].match = rg.match.substr(d[pn].start - rg.start, d[pn + 1].start - d[pn].start);
                }
                pn += 1;
            } else {
                if (!d[pn].match) {
                    d[pn].match = rg.match.substr(d[pn].start - rg.start);
                }
                break;
            }
        }
    }
    d = d.filter(function(i) {
        return i.match != null;
    });
    return d = d.map(function(i) {
        i.stack = i.stack.sort(function(a, b) {
            return a[0] - b[0];
        }).map(function(j) {
            return j[1];
        });
        return i;
    });
};

module.exports = {
    config: config,
    ranges: ranges,
    dissect: dissect
};

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWF0Y2hyLmpzIiwic291cmNlUm9vdCI6Ii4iLCJzb3VyY2VzIjpbIiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBOzs7Ozs7O0FBQUEsSUFBQTs7QUFRQSxDQUFBLEdBQUksT0FBQSxDQUFRLFFBQVI7OztBQUVKOzs7Ozs7OztBQVVBLE1BQUEsR0FBUyxTQUFDLFFBQUQ7QUFBYyxRQUFBO0FBQUU7U0FBQSxhQUFBOztxQkFBQSxDQUFDLElBQUksTUFBSixDQUFXLENBQVgsQ0FBRCxFQUFnQixDQUFoQjtBQUFBOztBQUFoQjs7O0FBRVQ7Ozs7Ozs7O0FBdUJBLE1BQUEsR0FBUyxTQUFDLE9BQUQsRUFBVSxHQUFWO0FBRUwsUUFBQTtJQUFBLEdBQUEsR0FBTTtBQUNOLFNBQVMsdUZBQVQ7UUFDSSxHQUFBLEdBQU0sT0FBUSxDQUFBLENBQUEsQ0FBRyxDQUFBLENBQUE7UUFDakIsR0FBQSxHQUFNLE9BQVEsQ0FBQSxDQUFBLENBQUcsQ0FBQSxDQUFBO1FBQ2pCLENBQUEsR0FBSTtRQUNKLENBQUEsR0FBSTtBQUNKLGVBQU0sQ0FBQyxDQUFDLE1BQVI7WUFDSSxLQUFBLEdBQVEsR0FBRyxDQUFDLElBQUosQ0FBUyxDQUFUO1lBQ1IsSUFBYSxhQUFiO0FBQUEsc0JBQUE7O1lBQ0EsSUFBRyxLQUFLLENBQUMsTUFBTixLQUFnQixDQUFuQjtnQkFDSSxHQUFHLENBQUMsSUFBSixDQUNJO29CQUFBLEtBQUEsRUFBTyxLQUFLLENBQUMsS0FBTixHQUFjLENBQXJCO29CQUNBLEtBQUEsRUFBTyxLQUFNLENBQUEsQ0FBQSxDQURiO29CQUVBLEtBQUEsRUFBTyxHQUZQO29CQUdBLEtBQUEsRUFBTyxDQUhQO2lCQURKO2dCQUtBLENBQUEsSUFBSyxLQUFLLENBQUMsS0FBTixHQUFjLEtBQU0sQ0FBQSxDQUFBLENBQUUsQ0FBQztnQkFDNUIsQ0FBQSxHQUFJLEdBQUcsQ0FBQyxLQUFKLENBQVUsQ0FBVixFQVBSO2FBQUEsTUFBQTtnQkFTSSxFQUFBLEdBQUs7QUFDTCxx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QUcsQ0FBQyxLQUFOLEdBQWMsRUFBRSxDQUFDLEtBQUssQ0FBQyxNQUFULENBQWdCLENBQUUsQ0FBQSxFQUFBLENBQUcsQ0FBQyxLQUFOLEdBQVksRUFBRSxDQUFDLEtBQS9CLEVBRGxCOztBQUVBLHNCQVBKOztRQUZKO0FBTEo7SUFlQSxDQUFBLEdBQUksQ0FBQyxDQUFDLE1BQUYsQ0FBUyxTQUFDLENBQUQ7ZUFBTztJQUFQLENBQVQ7V0FDSixDQUFBLEdBQUksQ0FBQyxDQUFDLEdBQUYsQ0FBTSxTQUFDLENBQUQ7UUFDTixDQUFDLENBQUMsS0FBRixHQUFVLENBQUMsQ0FBQyxLQUFLLENBQUMsSUFBUixDQUFhLFNBQUMsQ0FBRCxFQUFHLENBQUg7bUJBQU8sQ0FBRSxDQUFBLENBQUEsQ0FBRixHQUFLLENBQUUsQ0FBQSxDQUFBO1FBQWQsQ0FBYixDQUE4QixDQUFDLEdBQS9CLENBQW1DLFNBQUMsQ0FBRDttQkFBTyxDQUFFLENBQUEsQ0FBQTtRQUFULENBQW5DO2VBQ1Y7SUFGTSxDQUFOO0FBdENFOztBQTBDVixNQUFNLENBQUMsT0FBUCxHQUNJO0lBQUEsTUFBQSxFQUFTLE1BQVQ7SUFDQSxNQUFBLEVBQVMsTUFEVDtJQUVBLE9BQUEsRUFBUyxPQUZUIiwic291cmNlc0NvbnRlbnQiOlsiIyMjXG4wMCAgICAgMDAgICAwMDAwMDAwICAgMDAwMDAwMDAwICAgMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuMDAwMDAwMDAwICAwMDAwMDAwMDAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMDAwMDAwMCAgMDAwMDAwMCAgXG4wMDAgMCAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgICAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuIyMjXG5cbl8gPSByZXF1aXJlICdsb2Rhc2gnXG5cbiMjI1xuIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwMCAgMDAwICAgMDAwMDAwMCBcbjAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICAgIDAwMCAgMDAwICAgICAgXG4wMDAgICAgICAgMDAwICAgMDAwICAwMDAgMCAwMDAgIDAwMDAwMCAgICAwMDAgIDAwMCAgMDAwMFxuMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAgICAgMDAwICAwMDAgICAwMDBcbiAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMDAwMDAgXG4jIyNcbiNcbiMgY29udmVydCB0aGUgcGF0dGVybnMgb2JqZWN0IHRvIGEgbGlzdCBvZiBbUmVnRXhwKGtleSksIHZhbHVlXSBwYWlyc1xuXG5jb25maWcgPSAocGF0dGVybnMpIC0+ICggW25ldyBSZWdFeHAocCksIGFdIGZvciBwLGEgb2YgcGF0dGVybnMgKVxuXG4jIyNcbjAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMDAgICAwMDAwMDAwXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMCAgMDAwICAwMDAgICAgICAgIDAwMCAgICAgICAwMDAgICAgIFxuMDAwMDAwMCAgICAwMDAwMDAwMDAgIDAwMCAwIDAwMCAgMDAwICAwMDAwICAwMDAwMDAwICAgMDAwMDAwMCBcbjAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgIDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAgICAgMDAwXG4wMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAwMDAwMDAwIFxuIyMjXG4jXG4jIGFjY2VwdHMgYSBsaXN0IG9mIFtyZWdleHAsIHZhbHVlKHMpXSBwYWlycyBhbmQgYSBzdHJpbmdcbiMgcmV0dXJucyBhIGxpc3Qgb2Ygb2JqZWN0cyB3aXRoIGluZm9ybWF0aW9uIGFib3V0IHRoZSBtYXRjaGVzOlxuIyBcbiMgICAgIG1hdGNoOiB0aGUgbWF0Y2hlZCBzdWJzdHJpbmdcbiMgICAgIHN0YXJ0OiBwb3NpdGlvbiBvZiBtYXRjaCBpbiBzdHJcbiMgICAgIHZhbHVlOiB0aGUgdmFsdWUgZm9yIHRoZSBtYXRjaFxuIyAgICAgaW5kZXg6IHRoZSBpbmRleCBvZiB0aGUgcmVnZXhwIFxuIyAgICAgXG4jICAgICB0aGUgb2JqZWN0cyBhcmUgc29ydGVkIGJ5IHN0YXJ0LCBtYXRjaC5sZW5ndGggYW5kIGluZGV4XG4jICAgICBcbiMgICAgIGlmIHRoZSByZWdleHAgaGFzIGNhcHR1cmUgZ3JvdXBzIHRoZW4gXG4jICAgICAgICAgdGhlIHZhbHVlIGZvciB0aGUgbWF0Y2ggb2YgdGhlIG50aCBncm91cCBpc1xuIyAgICAgICAgICAgICB0aGUgbnRoIGl0ZW0gb2YgdmFsdWVzKHMpIGlmIHZhbHVlKHMpIGlzIGFuIGFycmF5XG4jICAgICAgICAgICAgIHRoZSBudGggW2tleSwgdmFsdWVdIHBhaXIgaWYgdmFsdWUocykgaXMgYW4gb2JqZWN0XG5cbnJhbmdlcyA9IChyZWdleGVzLCBzdHIpIC0+XG4gICAgXG4gICAgcmdzID0gW11cbiAgICBmb3IgciBpbiBbMC4uLnJlZ2V4ZXMubGVuZ3RoXVxuICAgICAgICByZWcgPSByZWdleGVzW3JdWzBdXG4gICAgICAgIGFyZyA9IHJlZ2V4ZXNbcl1bMV1cbiAgICAgICAgaSA9IDBcbiAgICAgICAgcyA9IHN0clxuICAgICAgICB3aGlsZSBzLmxlbmd0aFxuICAgICAgICAgICAgbWF0Y2ggPSByZWcuZXhlYyBzXG4gICAgICAgICAgICBicmVhayBpZiBub3QgbWF0Y2g/XG4gICAgICAgICAgICBpZiBtYXRjaC5sZW5ndGggPT0gMVxuICAgICAgICAgICAgICAgIHJncy5wdXNoXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBtYXRjaC5pbmRleCArIGlcbiAgICAgICAgICAgICAgICAgICAgbWF0Y2g6IG1hdGNoWzBdXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiBhcmdcbiAgICAgICAgICAgICAgICAgICAgaW5kZXg6IHJcbiAgICAgICAgICAgICAgICBpICs9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoXG4gICAgICAgICAgICAgICAgcyA9IHN0ci5zbGljZSBpXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZ3MgPSAwXG4gICAgICAgICAgICAgICAgZm9yIGogaW4gWzAuLm1hdGNoLmxlbmd0aC0yXVxuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGFyZ1xuICAgICAgICAgICAgICAgICAgICBpZiBfLmlzQXJyYXkodmFsdWUpIGFuZCBqIDwgdmFsdWUubGVuZ3RoIHRoZW4gdmFsdWUgPSB2YWx1ZVtqXVxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIF8uaXNPYmplY3QodmFsdWUpIGFuZCBqIDwgXy5zaXplKHZhbHVlKSBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gW18ua2V5cyh2YWx1ZSlbal0sIHZhbHVlW18ua2V5cyh2YWx1ZSlbal1dXVxuICAgICAgICAgICAgICAgICAgICBnaSA9IG1hdGNoWzBdLnNsaWNlKGdzKS5pbmRleE9mIG1hdGNoW2orMV1cbiAgICAgICAgICAgICAgICAgICAgcmdzLnB1c2hcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiBtYXRjaC5pbmRleCArIGkgKyBncyArIGdpXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaDogbWF0Y2hbaisxXVxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmRleDogclxuICAgICAgICAgICAgICAgICAgICBncyArPSBtYXRjaFtqKzFdLmxlbmd0aFxuICAgICAgICAgICAgICAgIGkgKz0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGhcbiAgICAgICAgICAgICAgICBzID0gc3RyLnNsaWNlIGlcbiAgICAgICAgICAgIFxuICAgIHJncy5zb3J0IChhLGIpIC0+IFxuICAgICAgICBpZiBhLnN0YXJ0ID09IGIuc3RhcnRcbiAgICAgICAgICAgIGlmIGEubWF0Y2gubGVuZ3RoID09IGIubWF0Y2gubGVuZ3RoXG4gICAgICAgICAgICAgICAgYS5pbmRleCAtIGIuaW5kZXhcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBhLm1hdGNoLmxlbmd0aCAtIGIubWF0Y2gubGVuZ3RoXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGEuc3RhcnQgLSBiLnN0YXJ0XG5cbiMjI1xuMDAwMDAwMCAgICAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAgICAwMDAwMDAwICAwMDAwMDAwMDBcbjAwMCAgIDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgICAgICAwMDAgICAgICAgICAgMDAwICAgXG4wMDAgICAwMDAgIDAwMCAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgICAgICAgIDAwMCAgIFxuMDAwICAgMDAwICAwMDAgICAgICAgMDAwICAgICAgIDAwMCAgMDAwICAgICAgIDAwMCAgICAgICAgICAwMDAgICBcbjAwMDAwMDAgICAgMDAwICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMCAgICAgMDAwICAgXG4jIyNcbiMgXG4jIGFjY2VwdHMgYSBsaXN0IG9mIHJhbmdlc1xuIyByZXR1cm5zIGEgbmV3IGxpc3Qgb2Ygb2JqZWN0c1xuIyBcbiMgICAgIG1hdGNoOiB0aGUgbWF0Y2hlZCBzdWJzdHJpbmdcbiMgICAgIHN0YXJ0OiBwb3NpdGlvbiBvZiBtYXRjaCBpbiBzdHJcbiMgICAgIHN0YWNrOiBsaXN0IG9mIHZhbHVlc1xuIyAgICAgXG4jICAgICB3aXRoIG5vbmUgb2YgdGhlIFtzdGFydCwgc3RhcnQrbWF0Y2gubGVuZ3RoXSByYW5nZXMgb3ZlcmxhcHBpbmdcblxuZGlzc2VjdCA9IChyYW5nZXMpIC0+IFxuICAgIHJldHVybiBbXSBpZiBub3QgcmFuZ2VzLmxlbmd0aFxuICAgIGRpID0gW11cbiAgICBmb3IgcmkgaW4gWzAuLi5yYW5nZXMubGVuZ3RoXVxuICAgICAgICByZyA9IHJhbmdlc1tyaV1cbiAgICAgICAgZGkucHVzaCBbcmcuc3RhcnQsIHJpXVxuICAgICAgICBkaS5wdXNoIFtyZy5zdGFydCArIHJnLm1hdGNoLmxlbmd0aF1cbiAgICBkaS5zb3J0IChhLGIpIC0+IFxuICAgICAgICBpZiBhWzBdPT1iWzBdIFxuICAgICAgICAgICAgYVsxXS1iWzFdXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGFbMF0tYlswXVxuICAgIGQgPSBbXVxuICAgIHNpID0gLTFcbiAgICBmb3IgaSBpbiBbMC4uLmRpLmxlbmd0aC0xXVxuICAgICAgICBpZiBkaVtpXVswXSA+IHNpXG4gICAgICAgICAgICBzaSA9IGRpW2ldWzBdXG4gICAgICAgICAgICBkLnB1c2hcbiAgICAgICAgICAgICAgICBzdGFydDogc2lcbiAgICAgICAgICAgICAgICBzdGFjazogW11cblxuICAgIHAgPSAwXG4gICAgZm9yIHJpIGluIFswLi4ucmFuZ2VzLmxlbmd0aF1cbiAgICAgICAgcmcgPSByYW5nZXNbcmldXG4gICAgICAgIHdoaWxlIGRbcF0uc3RhcnQgPCByZy5zdGFydCBcbiAgICAgICAgICAgIHAgKz0gMSBcbiAgICAgICAgcG4gPSBwXG4gICAgICAgIHdoaWxlIGRbcG5dLnN0YXJ0IDwgcmcuc3RhcnQrcmcubWF0Y2gubGVuZ3RoXG4gICAgICAgICAgICBkW3BuXS5zdGFjay5wdXNoIFtyZy5pbmRleCwgcmcudmFsdWVdXG4gICAgICAgICAgICBpZiBwbisxIDwgZC5sZW5ndGhcbiAgICAgICAgICAgICAgICBpZiBub3QgZFtwbl0ubWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgZFtwbl0ubWF0Y2ggPSByZy5tYXRjaC5zdWJzdHIgZFtwbl0uc3RhcnQtcmcuc3RhcnQsIGRbcG4rMV0uc3RhcnQtZFtwbl0uc3RhcnRcbiAgICAgICAgICAgICAgICBwbiArPSAxXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgaWYgbm90IGRbcG5dLm1hdGNoXG4gICAgICAgICAgICAgICAgICAgIGRbcG5dLm1hdGNoID0gcmcubWF0Y2guc3Vic3RyIGRbcG5dLnN0YXJ0LXJnLnN0YXJ0XG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICBkID0gZC5maWx0ZXIgKGkpIC0+IGkubWF0Y2g/XG4gICAgZCA9IGQubWFwIChpKSAtPiBcbiAgICAgICAgaS5zdGFjayA9IGkuc3RhY2suc29ydCgoYSxiKS0+YVswXS1iWzBdKS5tYXAgKGopIC0+IGpbMV1cbiAgICAgICAgaVxuXG5tb2R1bGUuZXhwb3J0cyA9IFxuICAgIGNvbmZpZzogIGNvbmZpZ1xuICAgIHJhbmdlczogIHJhbmdlc1xuICAgIGRpc3NlY3Q6IGRpc3NlY3RcbiJdfQ==
//# sourceURL=../coffee/matchr.coffee