// koffee 1.4.0

/*
 0000000   0000000   000       0000000   00000000    0000000   0000000   000000000
000       000   000  000      000   000  000   000  000       000   000     000   
000       000   000  000      000   000  0000000    000       000000000     000   
000       000   000  000      000   000  000   000  000       000   000     000   
 0000000   0000000   0000000   0000000   000   000   0000000  000   000     000
 */
var NEWLINE, args, bgfunc, bgrd, bgrdColors, c, clrlst, cnames, colorStream, colorize, dimText, expand, fatText, fbgcol, fbgnms, file, funkyBgrd, funkyText, i, invert, j, k, karg, klor, kolor, len, len1, len2, m, noon_stringify, o, p, patternFunc, q, ref, ref1, ref2, ref3, regexes, rpad, s, shortb, shortf, shorts, slash, syntaxStream, t, text, textColors, v,
    indexOf = [].indexOf;

klor = require('klor');

karg = require('karg');

kolor = klor.kolor;

kolor.globalize();

NEWLINE = /\r?\n/;

rpad = function(s, l) {
    s = String(s);
    while (s.length < l) {
        s += ' ';
    }
    return s;
};

text = {
    white: 'w',
    cyan: 'c',
    magenta: 'm',
    blue: 'b',
    yellow: 'y',
    green: 'g',
    red: 'r'
};

textColors = '';

for (c in text) {
    s = text[c];
    shorts = '';
    switch (s) {
        case 'x':
        case 'z':
            break;
        default:
            for (i = j = 1; j <= 8; i = ++j) {
                shortf = s + i;
                shorts += kolor[shortf](' ' + shortf + ' ');
            }
    }
    textColors += "    " + c + "  . = false . - " + text[c] + " . ? " + (kolor[c]('██')) + (dim(kolor[c]('██'))) + shorts + "\n";
}

bgrd = {
    bgRed: 'R',
    bgGreen: 'G',
    bgYellow: 'Y',
    bgBlue: 'B',
    bgMagenta: 'M',
    bgCyan: 'C',
    bgWhite: 'W'
};

bgfunc = function(c) {
    s = bgrd[c];
    switch (s) {
        case 'Z':
            return 'W2';
        case 'W':
            return 'W4';
        default:
            return s + 4;
    }
};

bgrdColors = '';

for (c in bgrd) {
    s = bgrd[c];
    shorts = '';
    switch (s) {
        case 'W':
            for (i = m = 1; m <= 8; i = ++m) {
                shortb = 'W' + i;
                shortf = 'w'.toLowerCase() + (9 - i);
                shorts += kolor[shortf](kolor[shortb](' ' + shortb + ' '));
            }
            break;
        case 'Z':
            break;
        default:
            for (i = o = 1; o <= 8; i = ++o) {
                shortb = s + i;
                shortf = s.toLowerCase() + (9 - i);
                shorts += kolor[shortf](kolor[shortb](' ' + shortb + ' '));
            }
    }
    bgrdColors += "    " + c + "  . = false . - " + bgrd[c] + " . ? " + (reset(kolor[bgfunc(c)]("    "))) + shorts + "\n";
}

args = karg("\ncolorcat\n\n    file         . ? the file(s) to display or stdin . **\n    fat          . ? " + (gray('     bold')) + "          . = false\n    dim          . ? " + (dim(white('  ▼▼ dim'))) + "       . = false\n" + textColors + "\n" + bgrdColors + "\n    ext          . ? use syntax highlighting for *.ext\n    pattern      . ? colorize with pattern\n    patternFile  . ? colorize with patterns in file   . - P\n    skipEmpty    . ? skip empty lines                       . = false\n    lineNumbers  . ? prepend output with line numbers       . = false\n    debug                                             . - X . = false\n    \nversion   " + (require(__dirname + "/../package.json").version));

if (args.debug) {
    noon_stringify = require('noon/js/stringify');
    console.log(noon_stringify(args, {
        colors: true
    }));
}

colorize = function(str, stack) {
    var err, len, len1, n, p, q, spl;
    try {
        spl = stack.map(function(s) {
            return String(s).split('.');
        });
        spl = spl.flat();
        if (!(indexOf.call(spl, 'keep') >= 0)) {
            for (p = 0, len = spl.length; p < len; p++) {
                s = spl[p];
                if (s.substr(0, 2) === 's:') {
                    str = s.substr(2);
                    spl = spl.filter(function(s) {
                        return s.substr(0, 2) !== 's:';
                    });
                    break;
                }
            }
        }
        for (q = 0, len1 = spl.length; q < len1; q++) {
            n = spl[q];
            if (kolor[n] != null) {
                str = kolor[n](str);
            } else if (kolor[bgfunc(n)] != null) {
                str = kolor[bgfunc(n)](str);
            }
        }
    } catch (error) {
        err = error;
        console.error(err);
    }
    return str;
};

regexes = [];

clrlst = Object.assign({}, bgrd);

clrlst = Object.assign(clrlst, text);

fbgnms = kolor.FG_NAMES.concat(kolor.BG_NAMES);

fbgcol = kolor.FG_COLORS.concat(kolor.BG_COLORS);

cnames = Object.keys(text).concat(Object.keys(bgrd));

cnames = cnames.concat(fbgnms);

invert = {};

for (k in clrlst) {
    v = clrlst[k];
    invert[v] = k;
}

invert.f = 'bold';

invert.d = 'dim';

invert.k = 'keep';

invert.x = 'gray';

invert.z = 'w2';

invert.Z = 'W1';

expand = function(e) {
    var cls, expd, pat;
    expd = function(c) {
        var r, ref, ref1;
        if (ref = c[0], indexOf.call(fbgcol, ref) >= 0) {
            if (ref1 = c.slice(0, 2), indexOf.call(fbgnms, ref1) >= 0) {
                if (c.length === 2) {
                    return c;
                } else {
                    return c.slice(0, 2) + '.' + expd(c.slice(2));
                }
            }
        }
        if (((c != null ? c.split : void 0) != null) && indexOf.call(cnames, c) < 0) {
            s = c.split('s\:');
            if (invert[s[0][0]]) {
                if (s[0].length === 1) {
                    r = invert[s[0][0]];
                } else {
                    r = invert[s[0][0]] + '.' + expd(s[0].slice(1));
                }
            } else {
                r = '';
            }
            if (s.length > 1) {
                r += '.s:' + s[1];
            }
            return r;
        } else {
            return c;
        }
    };
    for (pat in e) {
        cls = e[pat];
        if (cls instanceof Array) {
            e[pat] = cls.map(function(clr) {
                return expd(clr.split('.')[0]);
            });
        } else {
            e[pat] = expd(cls);
        }
    }
    return e;
};

funkyText = function(s) {
    return s;
};

funkyBgrd = function(s) {
    return s;
};

ref = Object.keys(text);
for (p = 0, len = ref.length; p < len; p++) {
    c = ref[p];
    if (args[c]) {
        funkyText = kolor[c];
    }
}

ref1 = Object.keys(bgrd);
for (q = 0, len1 = ref1.length; q < len1; q++) {
    c = ref1[q];
    if (args[c]) {
        funkyBgrd = kolor[bgfunc(c)];
    }
}

if (args.fat) {
    fatText = function(s) {
        return bold(funkyText(s));
    };
} else {
    fatText = funkyText;
}

if (args.dim) {
    dimText = function(s) {
        return dim(fatText(s));
    };
} else {
    dimText = fatText;
}

patternFunc = function() {
    var loadSyntax, matchr, matchrConfig, noon_parse, pattern, patterns;
    loadSyntax = function(f) {
        var fs, noon_load;
        fs = require('fs');
        if (fs.existsSync(f)) {
            noon_load = require('noon/js/load');
            return expand(noon_load(f));
        } else {
            return console.error("can't locate syntax file " + f);
        }
    };
    if (args.pattern != null) {
        noon_parse = require('noon/js/parse');
        patterns = expand(noon_parse(args.pattern));
    } else if (args.patternFile != null) {
        patterns = loadSyntax(args.patternFile);
    }
    if (patterns == null) {
        return function(chunk) {
            return funkyBgrd(dimText(chunk));
        };
    }
    matchr = require('./matchr');
    matchrConfig = matchr.config(patterns);
    pattern = function(chunk) {
        var clrzd, d, di, diss, ref2, rngs, t;
        chunk = kolor.strip(chunk);
        rngs = matchr.ranges(matchrConfig, chunk);
        diss = matchr.dissect(rngs);
        if (diss.length) {
            for (di = t = ref2 = diss.length - 1; ref2 <= 0 ? t <= 0 : t >= 0; di = ref2 <= 0 ? ++t : --t) {
                d = diss[di];
                clrzd = colorize(d.match, d.stack.reverse());
                chunk = chunk.slice(0, d.start) + clrzd + chunk.slice(d.start + d.match.length);
            }
        }
        return chunk;
    };
    return pattern;
};

colorStream = function(stream, pattern) {
    var buffer, lineno;
    lineno = 0;
    buffer = '';
    return stream.on('data', function(chunk) {
        var colorLines, lines;
        if (!chunk.endsWith('\n')) {
            buffer += chunk;
            return;
        }
        lines = (buffer + chunk).split('\n');
        colorLines = lines.map(function(l) {
            return pattern(l);
        });
        if (args.skipEmpty) {
            colorLines = colorLines.filter(function(l) {
                return kolor.strip(l).length > 0;
            });
        }
        if (args.lineNumbers) {
            colorLines = colorLines.map(function(l) {
                lineno += 1;
                return gray(dim(rpad("" + lineno, 6))) + l;
            });
        }
        console.log(colorLines.join('\n'));
        return buffer = '';
    });
};

syntaxStream = function(stream, ext) {
    var buffer, lineno;
    lineno = 0;
    buffer = '';
    return stream.on('data', function(chunk) {
        var colorLines, index, lines, ref2, rngs, t;
        if (!chunk.endsWith('\n')) {
            buffer += chunk;
            return;
        }
        lines = (buffer + chunk).split('\n');
        colorLines = [];
        rngs = klor.dissect(lines, ext);
        for (index = t = 0, ref2 = lines.length; 0 <= ref2 ? t < ref2 : t > ref2; index = 0 <= ref2 ? ++t : --t) {
            colorLines.push(klor.kolorizeChunks({
                chunks: rngs[index],
                number: args.lineNumbers && index + 1
            }));
        }
        if (args.skipEmpty) {
            colorLines = colorLines.filter(function(l) {
                return kolor.strip(l).length > 0;
            });
        }
        console.log(colorLines.join('\n'));
        return buffer = '';
    });
};


/*
 0000000   0000000   000000000    
000       000   000     000       
000       000000000     000       
000       000   000     000       
 0000000  000   000     000
 */

if (args.file.length) {
    slash = require('kslash');
    ref2 = args.file;
    for (t = 0, len2 = ref2.length; t < len2; t++) {
        file = ref2[t];
        text = slash.readText(file);
        console.log(klor.syntax({
            text: text,
            ext: slash.ext(file),
            numbers: args.lineNumbers
        }));
    }
} else {
    process.stdin.setEncoding('utf8');
    if (args.ext && (ref3 = args.ext, indexOf.call(klor.exts, ref3) >= 0)) {
        syntaxStream(process.stdin, args.ext);
    } else {
        colorStream(process.stdin, patternFunc());
    }
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY29sb3JjYXQuanMiLCJzb3VyY2VSb290IjoiLiIsInNvdXJjZXMiOlsiIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUE7Ozs7Ozs7QUFBQSxJQUFBLG1XQUFBO0lBQUE7O0FBVUEsSUFBQSxHQUFPLE9BQUEsQ0FBUSxNQUFSOztBQUNQLElBQUEsR0FBTyxPQUFBLENBQVEsTUFBUjs7QUFFUCxLQUFBLEdBQVEsSUFBSSxDQUFDOztBQUNiLEtBQUssQ0FBQyxTQUFOLENBQUE7O0FBRUEsT0FBQSxHQUFVOztBQVFWLElBQUEsR0FBTyxTQUFDLENBQUQsRUFBSSxDQUFKO0lBQ0gsQ0FBQSxHQUFJLE1BQUEsQ0FBTyxDQUFQO0FBQ0osV0FBTSxDQUFDLENBQUMsTUFBRixHQUFXLENBQWpCO1FBQXdCLENBQUEsSUFBSztJQUE3QjtXQUNBO0FBSEc7O0FBS1AsSUFBQSxHQUNJO0lBQUEsS0FBQSxFQUFTLEdBQVQ7SUFDQSxJQUFBLEVBQVMsR0FEVDtJQUVBLE9BQUEsRUFBUyxHQUZUO0lBR0EsSUFBQSxFQUFTLEdBSFQ7SUFJQSxNQUFBLEVBQVMsR0FKVDtJQUtBLEtBQUEsRUFBUyxHQUxUO0lBTUEsR0FBQSxFQUFTLEdBTlQ7OztBQVFKLFVBQUEsR0FBYTs7QUFDYixLQUFBLFNBQUE7O0lBRUksTUFBQSxHQUFTO0FBQ1QsWUFBTyxDQUFQO0FBQUEsYUFDUyxHQURUO0FBQUEsYUFDWSxHQURaO0FBQ1k7QUFEWjtBQUdRLGlCQUFTLDBCQUFUO2dCQUNJLE1BQUEsR0FBUyxDQUFBLEdBQUU7Z0JBQ1gsTUFBQSxJQUFVLEtBQU0sQ0FBQSxNQUFBLENBQU4sQ0FBYyxHQUFBLEdBQU0sTUFBTixHQUFlLEdBQTdCO0FBRmQ7QUFIUjtJQU9BLFVBQUEsSUFBYyxNQUFBLEdBQU8sQ0FBUCxHQUFTLGtCQUFULEdBQTJCLElBQUssQ0FBQSxDQUFBLENBQWhDLEdBQW1DLE9BQW5DLEdBQXlDLENBQUMsS0FBTSxDQUFBLENBQUEsQ0FBTixDQUFTLElBQVQsQ0FBRCxDQUF6QyxH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LENBQUMsTUFBYjtJQUVJLEtBQUEsR0FBUSxPQUFBLENBQVEsUUFBUjtBQUVSO0FBQUEsU0FBQSx3Q0FBQTs7UUFFSSxJQUFBLEdBQU8sS0FBSyxDQUFDLFFBQU4sQ0FBZSxJQUFmO1FBQW1CLE9BQUEsQ0FFMUIsR0FGMEIsQ0FFdEIsSUFBSSxDQUFDLE1BQUwsQ0FBWTtZQUFBLElBQUEsRUFBSyxJQUFMO1lBQVcsR0FBQSxFQUFJLEtBQUssQ0FBQyxHQUFOLENBQVUsSUFBVixDQUFmO1lBQWdDLE9BQUEsRUFBUSxJQUFJLENBQUMsV0FBN0M7U0FBWixDQUZzQjtBQUY5QixLQUpKO0NBQUEsTUFBQTtJQVlJLE9BQU8sQ0FBQyxLQUFLLENBQUMsV0FBZCxDQUEwQixNQUExQjtJQUVBLElBQUcsSUFBSSxDQUFDLEdBQUwsSUFBYSxRQUFBLElBQUksQ0FBQyxHQUFMLEVBQUEsYUFBWSxJQUFJLENBQUMsSUFBakIsRUFBQSxJQUFBLE1BQUEsQ0FBaEI7UUFDSSxZQUFBLENBQWEsT0FBTyxDQUFDLEtBQXJCLEVBQTRCLElBQUksQ0FBQyxHQUFqQyxFQURKO0tBQUEsTUFBQTtRQUdJLFdBQUEsQ0FBWSxPQUFPLENBQUMsS0FBcEIsRUFBMkIsV0FBQSxDQUFBLENBQTNCLEVBSEo7S0FkSiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwICAgICAgIDAwMDAwMDAgICAwMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwMFxuMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgICAgIDAwMCAgIFxuMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwICAwMDAwMDAwICAgIDAwMCAgICAgICAwMDAwMDAwMDAgICAgIDAwMCAgIFxuMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgICAgIDAwMCAgIFxuIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAwMDAgICAwMDAwMDAwICAwMDAgICAwMDAgICAgIDAwMCAgIFxuIyMjXG5cbiMg4pa4c3RhcnQgJ2NvbG9yY2F0J1xuXG5rbG9yID0gcmVxdWlyZSAna2xvcidcbmthcmcgPSByZXF1aXJlICdrYXJnJ1xuXG5rb2xvciA9IGtsb3Iua29sb3JcbmtvbG9yLmdsb2JhbGl6ZSgpXG5cbk5FV0xJTkUgPSAvXFxyP1xcbi9cblxuIyAgMDAwMDAwMCAgIDAwMDAwMDAwICAgIDAwMDAwMDAgICAgMDAwMDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAwMDAgICAgIFxuIyAwMDAwMDAwMDAgIDAwMDAwMDAgICAgMDAwICAwMDAwICAwMDAwMDAwIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAgIDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwIFxuXG5ycGFkID0gKHMsIGwpIC0+XG4gICAgcyA9IFN0cmluZyBzXG4gICAgd2hpbGUgcy5sZW5ndGggPCBsIHRoZW4gcyArPSAnICdcbiAgICBzXG5cbnRleHQgPSBcbiAgICB3aGl0ZTogICAndydcbiAgICBjeWFuOiAgICAnYydcbiAgICBtYWdlbnRhOiAnbSdcbiAgICBibHVlOiAgICAnYidcbiAgICB5ZWxsb3c6ICAneSdcbiAgICBncmVlbjogICAnZydcbiAgICByZWQ6ICAgICAncicgXG4gICAgICAgIFxudGV4dENvbG9ycyA9ICcnXG5mb3IgYyxzIG9mIHRleHRcbiAgICBcbiAgICBzaG9ydHMgPSAnJ1xuICAgIHN3aXRjaCBzXG4gICAgICAgIHdoZW4gJ3gnJ3onIHRoZW5cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgZm9yIGkgaW4gWzEuLjhdXG4gICAgICAgICAgICAgICAgc2hvcnRmID0gcytpXG4gICAgICAgICAgICAgICAgc2hvcnRzICs9IGtvbG9yW3Nob3J0Zl0gJyAnICsgc2hvcnRmICsgJyAnXG4gICAgXG4gICAgdGV4dENvbG9ycyArPSBcIiAgICAje2N9ICAuID0gZmFsc2UgLiAtICN7dGV4dFtjXX0gLiA/ICN7a29sb3JbY10gJ+KWiOKWiCd9I3tkaW0ga29sb3JbY10gJ+KWiOKWiCd9I3tzaG9ydHN9XFxuXCJcblxuYmdyZCA9IFxuICAgIGJnUmVkOiAgICAgJ1InIFxuICAgIGJnR3JlZW46ICAgJ0cnXG4gICAgYmdZZWxsb3c6ICAnWSdcbiAgICBiZ0JsdWU6ICAgICdCJ1xuICAgIGJnTWFnZW50YTogJ00nXG4gICAgYmdDeWFuOiAgICAnQydcbiAgICBiZ1doaXRlOiAgICdXJ1xuICAgIFxuYmdmdW5jID0gKGMpIC0+XG4gICAgcyA9IGJncmRbY11cbiAgICBzd2l0Y2ggc1xuICAgICAgICB3aGVuICdaJyB0aGVuICdXMidcbiAgICAgICAgd2hlbiAnVycgdGhlbiAnVzQnXG4gICAgICAgIGVsc2Ugcys0XG4gICAgXG5iZ3JkQ29sb3JzID0gJydcbmZvciBjLHMgb2YgYmdyZFxuICAgIFxuICAgIHNob3J0cyA9ICcnXG4gICAgc3dpdGNoIHNcbiAgICAgICAgd2hlbiAnVydcbiAgICAgICAgICAgIGZvciBpIGluIFsxLi44XVxuICAgICAgICAgICAgICAgIHNob3J0YiA9ICdXJytpXG4gICAgICAgICAgICAgICAgc2hvcnRmID0gJ3cnLnRvTG93ZXJDYXNlKCkrKDktaSlcbiAgICAgICAgICAgICAgICBzaG9ydHMgKz0ga29sb3Jbc2hvcnRmXSBrb2xvcltzaG9ydGJdICcgJyArIHNob3J0YiArICcgJ1xuICAgICAgICAgICAgXG4gICAgICAgIHdoZW4gJ1onIHRoZW5cbiAgICAgICAgICAgIFxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBmb3IgaSBpbiBbMS4uOF1cbiAgICAgICAgICAgICAgICBzaG9ydGIgPSBzK2lcbiAgICAgICAgICAgICAgICBzaG9ydGYgPSBzLnRvTG93ZXJDYXNlKCkrKDktaSlcbiAgICAgICAgICAgICAgICBzaG9ydHMgKz0ga29sb3Jbc2hvcnRmXSBrb2xvcltzaG9ydGJdICcgJyArIHNob3J0YiArICcgJ1xuICAgIFxuICAgIGJncmRDb2xvcnMgKz0gXCIgICAgI3tjfSAgLiA9IGZhbHNlIC4gLSAje2JncmRbY119IC4gPyAje3Jlc2V0KGtvbG9yW2JnZnVuYyBjXShcIiAgICBcIikpfSN7c2hvcnRzfVxcblwiXG4gICAgICAgIFxuYXJncyA9IGthcmcgXCJcIlwiXG5cbmNvbG9yY2F0XG5cbiAgICBmaWxlICAgICAgICAgLiA/IHRoZSBmaWxlKHMpIHRvIGRpc3BsYXkgb3Igc3RkaW4gLiAqKlxuICAgIGZhdCAgICAgICAgICAuID8gI3sgIGdyYXkgJyAgICAgYm9sZCcgfSAgICAgICAgICAuID0gZmFsc2VcbiAgICBkaW0gICAgICAgICAgLiA/ICN7IGRpbSB3aGl0ZSAnICDilrzilrwgZGltJyB9ICAgICAgIC4gPSBmYWxzZVxuI3t0ZXh0Q29sb3JzfVxuI3tiZ3JkQ29sb3JzfVxuICAgIGV4dCAgICAgICAgICAuID8gdXNlIHN5bnRheCBoaWdobGlnaHRpbmcgZm9yICouZXh0XG4gICAgcGF0dGVybiAgICAgIC4gPyBjb2xvcml6ZSB3aXRoIHBhdHRlcm5cbiAgICBwYXR0ZXJuRmlsZSAgLiA/IGNvbG9yaXplIHdpdGggcGF0dGVybnMgaW4gZmlsZSAgIC4gLSBQXG4gICAgc2tpcEVtcHR5ICAgIC4gPyBza2lwIGVtcHR5IGxpbmVzICAgICAgICAgICAgICAgICAgICAgICAuID0gZmFsc2VcbiAgICBsaW5lTnVtYmVycyAgLiA/IHByZXBlbmQgb3V0cHV0IHdpdGggbGluZSBudW1iZXJzICAgICAgIC4gPSBmYWxzZVxuICAgIGRlYnVnICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLiAtIFggLiA9IGZhbHNlXG4gICAgXG52ZXJzaW9uICAgI3tyZXF1aXJlKFwiI3tfX2Rpcm5hbWV9Ly4uL3BhY2thZ2UuanNvblwiKS52ZXJzaW9ufVxuXCJcIlwiXG5cbmlmIGFyZ3MuZGVidWdcbiAgICBub29uX3N0cmluZ2lmeSA9IHJlcXVpcmUgJ25vb24vanMvc3RyaW5naWZ5J1xuICAgIGxvZyBub29uX3N0cmluZ2lmeSBhcmdzLCBjb2xvcnM6dHJ1ZVxuICAgIFxuIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAgICAgICAgMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwICAwMDAwMDAwICAwMDAwMDAwMFxuIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAwMDAgICAwMDAgICAgIFxuIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAwMDAgIDAwMDAwMDAgICAgMDAwICAgIDAwMCAgICAwMDAwMDAwIFxuIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAgICAwMDAgICAgIFxuIyAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMCAgIDAwMCAgMDAwICAwMDAwMDAwICAwMDAwMDAwMFxuXG5jb2xvcml6ZSA9IChzdHIsIHN0YWNrKSAtPlxuICAgIHRyeVxuICAgICAgICBzcGwgPSBzdGFjay5tYXAgKHMpIC0+IFN0cmluZyhzKS5zcGxpdCAnLidcbiAgICAgICAgc3BsID0gc3BsLmZsYXQoKVxuXG4gICAgICAgIGlmIG5vdCAoJ2tlZXAnIGluIHNwbClcbiAgICAgICAgICAgIGZvciBzIGluIHNwbFxuICAgICAgICAgICAgICAgIGlmIHMuc3Vic3RyKDAsMikgPT0gJ3M6J1xuICAgICAgICAgICAgICAgICAgICBzdHIgPSBzLnN1YnN0cigyKVxuICAgICAgICAgICAgICAgICAgICBzcGwgPSBzcGwuZmlsdGVyIChzKSAtPiBzLnN1YnN0cigwLDIpICE9ICdzOidcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcblxuICAgICAgICBmb3IgbiBpbiBzcGxcbiAgICAgICAgICAgIGlmIGtvbG9yW25dP1xuICAgICAgICAgICAgICAgIHN0ciA9IGtvbG9yW25dIHN0clxuICAgICAgICAgICAgZWxzZSBpZiBrb2xvcltiZ2Z1bmMgbl0/XG4gICAgICAgICAgICAgICAgc3RyID0ga29sb3JbYmdmdW5jIG5dIHN0clxuICAgIGNhdGNoIGVyclxuICAgICAgICBlcnJvciBlcnJcbiAgICBzdHJcblxuIyAwMDAwMDAwMCAgMDAwICAgMDAwICAwMDAwMDAwMCAgICAwMDAwMDAwICAgMDAwICAgMDAwICAwMDAwMDAwICBcbiMgMDAwICAgICAgICAwMDAgMDAwICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgMDAwXG4jIDAwMDAwMDAgICAgIDAwMDAwICAgIDAwMDAwMDAwICAgMDAwMDAwMDAwICAwMDAgMCAwMDAgIDAwMCAgIDAwMFxuIyAwMDAgICAgICAgIDAwMCAwMDAgICAwMDAgICAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgICAwMDBcbiMgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgXG5cbnJlZ2V4ZXMgPSBbXVxuXG5jbHJsc3QgPSBPYmplY3QuYXNzaWduIHt9LCBiZ3JkXG5jbHJsc3QgPSBPYmplY3QuYXNzaWduIGNscmxzdCwgdGV4dFxuZmJnbm1zID0ga29sb3IuRkdfTkFNRVMuY29uY2F0IGtvbG9yLkJHX05BTUVTXG5mYmdjb2wgPSBrb2xvci5GR19DT0xPUlMuY29uY2F0IGtvbG9yLkJHX0NPTE9SU1xuY25hbWVzID0gT2JqZWN0LmtleXModGV4dCkuY29uY2F0IE9iamVjdC5rZXlzKGJncmQpXG5jbmFtZXMgPSBjbmFtZXMuY29uY2F0IGZiZ25tc1xuaW52ZXJ0ID0ge31cbmZvciBrLHYgb2YgY2xybHN0IHRoZW4gaW52ZXJ0W3ZdID0ga1xuaW52ZXJ0LmYgPSAnYm9sZCdcbmludmVydC5kID0gJ2RpbSdcbmludmVydC5rID0gJ2tlZXAnXG5pbnZlcnQueCA9ICdncmF5J1xuaW52ZXJ0LnogPSAndzInXG5pbnZlcnQuWiA9ICdXMSdcblxuZXhwYW5kID0gKGUpIC0+XG4gICAgXG4gICAgZXhwZCA9IChjKSAtPlxuICAgICAgICBpZiBjWzBdIGluIGZiZ2NvbFxuICAgICAgICAgICAgaWYgY1swLi4xXSBpbiBmYmdubXNcbiAgICAgICAgICAgICAgICBpZiBjLmxlbmd0aCA9PSAyIHRoZW4gcmV0dXJuIGNcbiAgICAgICAgICAgICAgICBlbHNlICAgICAgICAgICAgICAgICAgcmV0dXJuIGNbMC4uMV0gKyAnLicgKyBleHBkIGNbMi4uXVxuICAgICAgICAgICAgICAgIFxuICAgICAgICBpZiBjPy5zcGxpdD8gYW5kIGMgbm90IGluIGNuYW1lc1xuICAgICAgICAgICAgcyA9IGMuc3BsaXQgJ3NcXDonXG4gICAgICAgICAgICBpZiBpbnZlcnRbc1swXVswXV1cbiAgICAgICAgICAgICAgICBpZiBzWzBdLmxlbmd0aCA9PSAxIHRoZW4gciA9IGludmVydFtzWzBdWzBdXVxuICAgICAgICAgICAgICAgIGVsc2UgICAgICAgICAgICAgICAgICAgICByID0gaW52ZXJ0W3NbMF1bMF1dICsgJy4nICsgZXhwZCBzWzBdWzEuLl1cbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAjIGVycm9yICdkYWZ1az8nLCBjLCBzXG4gICAgICAgICAgICAgICAgciA9ICcnXG4gICAgICAgICAgICByICs9ICcuczonICsgc1sxXSBpZiBzLmxlbmd0aCA+IDFcbiAgICAgICAgICAgIHJcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgY1xuICAgIFxuICAgIGZvciBwYXQsY2xzIG9mIGVcbiAgICAgICAgaWYgY2xzIGluc3RhbmNlb2YgQXJyYXlcbiAgICAgICAgICAgIGVbcGF0XSA9IGNscy5tYXAgKGNscikgLT4gZXhwZCBjbHIuc3BsaXQoJy4nKVswXVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICBlW3BhdF0gPSBleHBkIGNsc1xuICAgIGUgXG5cbiMgMDAwMDAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuIyAwMDAgICAgICAgMDAwICAgMDAwICAwMDAwICAwMDAgIDAwMCAgMDAwICAgIDAwMCAwMDAgXG4jIDAwMDAwMCAgICAwMDAgICAwMDAgIDAwMCAwIDAwMCAgMDAwMDAwMCAgICAgIDAwMDAwICBcbiMgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgIDAwMCAgIFxuIyAwMDAgICAgICAgIDAwMDAwMDAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgXG5cbmZ1bmt5VGV4dCA9IChzKSAtPiBzXG5mdW5reUJncmQgPSAocykgLT4gc1xuXG5mb3IgYyBpbiBPYmplY3Qua2V5cyB0ZXh0XG4gICAgaWYgYXJnc1tjXVxuICAgICAgICBmdW5reVRleHQgPSBrb2xvcltjXVxuICAgICAgICBcbmZvciBjIGluIE9iamVjdC5rZXlzIGJncmRcbiAgICBpZiBhcmdzW2NdXG4gICAgICAgIGZ1bmt5QmdyZCA9IGtvbG9yW2JnZnVuYyBjXVxuXG5pZiBhcmdzLmZhdFxuICAgIGZhdFRleHQgPSAocykgLT4gYm9sZCBmdW5reVRleHQgc1xuZWxzZVxuICAgIGZhdFRleHQgPSBmdW5reVRleHRcblxuaWYgYXJncy5kaW1cbiAgICBkaW1UZXh0ID0gKHMpIC0+IGRpbSBmYXRUZXh0IHNcbmVsc2VcbiAgICBkaW1UZXh0ID0gZmF0VGV4dFxuXG4jIDAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMDAwMDAwMCAgMDAwMDAwMDAgIDAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgICAwMDAgICAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMDAgIDAwMCAgMDAwICAgICBcbiMgMDAwMDAwMDAgICAwMDAwMDAwMDAgICAgIDAwMCAgICAgICAgMDAwICAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAgMCAwMDAgIDAwMDAwMDAgXG4jIDAwMCAgICAgICAgMDAwICAgMDAwICAgICAwMDAgICAgICAgIDAwMCAgICAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAwMDAwICAgICAgIDAwMFxuIyAwMDAgICAgICAgIDAwMCAgIDAwMCAgICAgMDAwICAgICAgICAwMDAgICAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCBcblxucGF0dGVybkZ1bmMgPSAtPlxuICAgIFxuICAgIGxvYWRTeW50YXggPSAoZikgLT5cbiAgICAgICAgZnMgPSByZXF1aXJlICdmcydcbiAgICAgICAgaWYgZnMuZXhpc3RzU3luYyBmXG4gICAgICAgICAgICBub29uX2xvYWQgPSByZXF1aXJlICdub29uL2pzL2xvYWQnXG4gICAgICAgICAgICBleHBhbmQgbm9vbl9sb2FkIGYgXG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIGVycm9yIFwiY2FuJ3QgbG9jYXRlIHN5bnRheCBmaWxlICN7Zn1cIlxuICAgIFxuICAgIGlmIGFyZ3MucGF0dGVybj9cbiAgICAgICAgbm9vbl9wYXJzZSA9IHJlcXVpcmUgJ25vb24vanMvcGFyc2UnXG4gICAgICAgIHBhdHRlcm5zID0gZXhwYW5kIG5vb25fcGFyc2UgYXJncy5wYXR0ZXJuXG4gICAgICAgICMgbG9nIHBhdHRlcm5zXG4gICAgZWxzZSBpZiBhcmdzLnBhdHRlcm5GaWxlP1xuICAgICAgICBwYXR0ZXJucyA9IGxvYWRTeW50YXggYXJncy5wYXR0ZXJuRmlsZVxuICAgIFxuICAgIGlmIG5vdCBwYXR0ZXJucz9cbiAgICAgICAgcmV0dXJuIChjaHVuaykgLT4gZnVua3lCZ3JkIGRpbVRleHQgY2h1bmtcbiAgICAgICAgXG4gICAgbWF0Y2hyID0gcmVxdWlyZSAnLi9tYXRjaHInXG4gICAgbWF0Y2hyQ29uZmlnID0gbWF0Y2hyLmNvbmZpZyBwYXR0ZXJuc1xuICAgICAgICAgIFxuICAgIHBhdHRlcm4gPSAoY2h1bmspIC0+XG4gICAgICAgIGNodW5rID0ga29sb3Iuc3RyaXAgY2h1bmtcbiAgICAgICAgcm5ncyA9IG1hdGNoci5yYW5nZXMgbWF0Y2hyQ29uZmlnLCBjaHVua1xuICAgICAgICBkaXNzID0gbWF0Y2hyLmRpc3NlY3Qgcm5nc1xuICAgICAgICBcbiAgICAgICAgaWYgZGlzcy5sZW5ndGhcbiAgICAgICAgICAgIGZvciBkaSBpbiBbZGlzcy5sZW5ndGgtMS4uMF1cbiAgICAgICAgICAgICAgICBkID0gZGlzc1tkaV1cbiAgICAgICAgICAgICAgICBjbHJ6ZCA9IGNvbG9yaXplIGQubWF0Y2gsIGQuc3RhY2sucmV2ZXJzZSgpXG4gICAgICAgICAgICAgICAgY2h1bmsgPSBjaHVuay5zbGljZSgwLCBkLnN0YXJ0KSArIGNscnpkICsgY2h1bmsuc2xpY2UoZC5zdGFydCtkLm1hdGNoLmxlbmd0aClcbiAgICAgICAgY2h1bmtcbiAgICAgICAgXG4gICAgcmV0dXJuIHBhdHRlcm5cblxuIyAgMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwMCAgIDAwMDAwMDAwICAgMDAwMDAwMCAgIDAwICAgICAwMFxuIyAwMDAgICAgICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuIyAwMDAwMDAwICAgICAgMDAwICAgICAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMDAwMDAwMFxuIyAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAwIDAwMFxuIyAwMDAwMDAwICAgICAgMDAwICAgICAwMDAgICAwMDAgIDAwMDAwMDAwICAwMDAgICAwMDAgIDAwMCAgIDAwMFxuXG5jb2xvclN0cmVhbSA9IChzdHJlYW0sIHBhdHRlcm4pIC0+XG5cbiAgICBsaW5lbm8gPSAwXG4gICAgYnVmZmVyID0gJydcbiAgICBzdHJlYW0ub24gJ2RhdGEnIChjaHVuaykgLT5cbiAgICAgICAgXG4gICAgICAgIGlmIG5vdCBjaHVuay5lbmRzV2l0aCAnXFxuJ1xuICAgICAgICAgICAgYnVmZmVyICs9IGNodW5rXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIFxuICAgICAgICBsaW5lcyA9IChidWZmZXIrY2h1bmspLnNwbGl0ICdcXG4nXG4gICAgICAgIGNvbG9yTGluZXMgPSBsaW5lcy5tYXAgKGwpIC0+IHBhdHRlcm4gbFxuICAgICAgICBcbiAgICAgICAgaWYgYXJncy5za2lwRW1wdHlcbiAgICAgICAgICAgIGNvbG9yTGluZXMgPSBjb2xvckxpbmVzLmZpbHRlciAobCkgLT4gXG4gICAgICAgICAgICAgICAga29sb3Iuc3RyaXAobCkubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgIFxuICAgICAgICBpZiBhcmdzLmxpbmVOdW1iZXJzXG4gICAgICAgICAgICBjb2xvckxpbmVzID0gY29sb3JMaW5lcy5tYXAgKGwpIC0+IFxuICAgICAgICAgICAgICAgIGxpbmVubyArPSAxXG4gICAgICAgICAgICAgICAgcmV0dXJuIGdyYXkoZGltIHJwYWQoXCIje2xpbmVub31cIiw2KSkgKyBsXG4gICAgICAgICAgICAgICAgXG4gICAgICAgIGxvZyBjb2xvckxpbmVzLmpvaW4gJ1xcbidcbiAgICAgICAgYnVmZmVyID0gJydcbiAgICAgICAgXG5zeW50YXhTdHJlYW0gPSAoc3RyZWFtLCBleHQpIC0+XG5cbiAgICBsaW5lbm8gPSAwXG4gICAgYnVmZmVyID0gJydcbiAgICBzdHJlYW0ub24gJ2RhdGEnIChjaHVuaykgLT5cbiAgICAgICAgXG4gICAgICAgIGlmIG5vdCBjaHVuay5lbmRzV2l0aCAnXFxuJ1xuICAgICAgICAgICAgYnVmZmVyICs9IGNodW5rXG4gICAgICAgICAgICByZXR1cm5cbiAgICAgICAgXG4gICAgICAgIGxpbmVzID0gKGJ1ZmZlcitjaHVuaykuc3BsaXQgJ1xcbidcbiAgICAgICAgY29sb3JMaW5lcyA9IFtdXG4gICAgICAgIFxuICAgICAgICBybmdzID0ga2xvci5kaXNzZWN0IGxpbmVzLCBleHRcbiAgICAgICAgZm9yIGluZGV4IGluIFswLi4ubGluZXMubGVuZ3RoXVxuICAgICAgICAgICAgY29sb3JMaW5lcy5wdXNoIGtsb3Iua29sb3JpemVDaHVua3MgY2h1bmtzOnJuZ3NbaW5kZXhdLCBudW1iZXI6YXJncy5saW5lTnVtYmVycyBhbmQgaW5kZXgrMVxuICAgICAgICBcbiAgICAgICAgaWYgYXJncy5za2lwRW1wdHlcbiAgICAgICAgICAgIGNvbG9yTGluZXMgPSBjb2xvckxpbmVzLmZpbHRlciAobCkgLT4gXG4gICAgICAgICAgICAgICAga29sb3Iuc3RyaXAobCkubGVuZ3RoID4gMFxuICAgICAgICAgICAgICAgIFxuICAgICAgICBsb2cgY29sb3JMaW5lcy5qb2luICdcXG4nXG4gICAgICAgIGJ1ZmZlciA9ICcnXG4gICAgXG4jIyNcbiAwMDAwMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAwMCAgICBcbjAwMCAgICAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgICBcbjAwMCAgICAgICAwMDAwMDAwMDAgICAgIDAwMCAgICAgICBcbjAwMCAgICAgICAwMDAgICAwMDAgICAgIDAwMCAgICAgICBcbiAwMDAwMDAwICAwMDAgICAwMDAgICAgIDAwMCAgICAgICBcbiMjI1xuICAgIFxuaWYgYXJncy5maWxlLmxlbmd0aFxuICBcbiAgICBzbGFzaCA9IHJlcXVpcmUgJ2tzbGFzaCdcbiAgICBcbiAgICBmb3IgZmlsZSBpbiBhcmdzLmZpbGUgICAgXG5cbiAgICAgICAgdGV4dCA9IHNsYXNoLnJlYWRUZXh0IGZpbGVcbiAgXG4gICAgICAgIGxvZyBrbG9yLnN5bnRheCB0ZXh0OnRleHQsIGV4dDpzbGFzaC5leHQoZmlsZSksIG51bWJlcnM6YXJncy5saW5lTnVtYmVyc1xuICAgICAgICAgICAgICAgIFxuZWxzZVxuICAgIFxuICAgIHByb2Nlc3Muc3RkaW4uc2V0RW5jb2RpbmcgJ3V0ZjgnXG4gICAgXG4gICAgaWYgYXJncy5leHQgYW5kIGFyZ3MuZXh0IGluIGtsb3IuZXh0c1xuICAgICAgICBzeW50YXhTdHJlYW0gcHJvY2Vzcy5zdGRpbiwgYXJncy5leHRcbiAgICBlbHNlICAgIFxuICAgICAgICBjb2xvclN0cmVhbSBwcm9jZXNzLnN0ZGluLCBwYXR0ZXJuRnVuYygpXG5cbiMgcHJvY2Vzcy5vbiAnZXhpdCcsIChjb2RlKSAtPiDilrhlbmQgJ2NvbG9yY2F0J1xuIl19
//# sourceURL=../coffee/colorcat.coffee